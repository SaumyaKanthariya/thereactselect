'use strict';var t=require('react'),lucideReact=require('lucide-react'),classVarianceAuthority=require('class-variance-authority'),clsx=require('clsx');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var t__default=/*#__PURE__*/_interopDefault(t);var E=t.createContext(null);function V(){let n=t.useContext(E);if(!n)throw new Error("useSelectContext must be used within a SelectProvider");return n}function I({children:n,props:r}){let b=t.useRef(null),g=t.useRef(null),i=t.useRef(null),[l,e]=t.useState({isOpen:r.defaultOpen||false,searchValue:"",highlightedIndex:-1,selectedValues:Array.isArray(r.defaultValue)?r.defaultValue:r.defaultValue?[r.defaultValue]:[],filteredOptions:[],loading:false}),c=t.useCallback(()=>r.options?r.options:r.groups?r.groups.flatMap(a=>a.options):[],[r.options,r.groups]),p=t.useCallback((a,m)=>m.trim()?a.filter(f=>f.label.toLowerCase().includes(m.toLowerCase())||f.value.toString().toLowerCase().includes(m.toLowerCase())):a,[]);t.useEffect(()=>{let a=c(),m=p(a,l.searchValue);e(f=>({...f,filteredOptions:m}));},[l.searchValue,c,p]);let o=t.useCallback(()=>{e(a=>({...a,isOpen:true})),r.onOpenChange?.(true);},[r]),s=t.useCallback(()=>{e(a=>({...a,isOpen:false,searchValue:"",highlightedIndex:-1})),r.onOpenChange?.(false);},[r]),d=t.useCallback(()=>{l.isOpen?s():o();},[l.isOpen,s,o]),S=t.useCallback(a=>{e(m=>({...m,searchValue:a})),r.onSearchChange?.(a);},[r]),w=t.useCallback(a=>{e(m=>({...m,highlightedIndex:a}));},[]),u=t.useCallback(a=>{if(!a.disabled)if(r.multiple){let m=l.selectedValues.includes(a.value)?l.selectedValues.filter(f=>f!==a.value):[...l.selectedValues,a.value];e(f=>({...f,selectedValues:m})),r.onValueChange?.(m),r.onOptionSelect?.(a,!l.selectedValues.includes(a.value));}else e(m=>({...m,selectedValues:[a.value]})),r.onValueChange?.(a.value),r.onOptionSelect?.(a),r.closeOnSelect!==false&&s();},[r,l.selectedValues,s]),N=t.useCallback(a=>{if(r.multiple){let m=l.selectedValues.filter(f=>f!==a.value);e(f=>({...f,selectedValues:m})),r.onValueChange?.(m),r.onOptionSelect?.(a,false);}},[r,l.selectedValues]),O=t.useCallback(()=>{e(a=>({...a,selectedValues:[]})),r.multiple?r.onValueChange?.([]):r.onValueChange?.(void 0),r.onClear?.();},[r]),x=t.useCallback(()=>{e(a=>({...a,highlightedIndex:Math.min(a.highlightedIndex+1,a.filteredOptions.length-1)}));},[]),y=t.useCallback(()=>{e(a=>({...a,highlightedIndex:Math.max(a.highlightedIndex-1,0)}));},[]),G=t.useCallback(()=>{if(r.multiple){let f=c().filter(C=>!C.disabled).map(C=>C.value);e(C=>({...C,selectedValues:f})),r.onValueChange?.(f),r.onSelectAll?.();}},[r,c]),U=t.useCallback(()=>{l.highlightedIndex>=0&&l.filteredOptions[l.highlightedIndex]&&u(l.filteredOptions[l.highlightedIndex]);},[l.highlightedIndex,l.filteredOptions,u]),X={...l,props:r,triggerRef:b,dropdownRef:g,searchRef:i,open:o,close:s,toggle:d,setSearchValue:S,setHighlightedIndex:w,selectOption:u,deselectOption:N,clearSelection:O,selectAll:G,highlightNext:x,highlightPrevious:y,selectHighlighted:U};return t__default.default.createElement(E.Provider,{value:X},n)}function v(...n){return clsx.clsx(n)}var M=classVarianceAuthority.cva("relative w-full cursor-pointer rounded-md border bg-input text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-border bg-background",outline:"border-border bg-transparent",ghost:"border-transparent bg-transparent hover:bg-accent hover:text-accent-foreground",filled:"border-transparent bg-muted"},size:{default:"h-10 px-3 py-2",sm:"h-8 px-2 py-1 text-xs",lg:"h-12 px-4 py-3",xl:"h-14 px-5 py-4 text-lg"},state:{default:"",error:"border-destructive focus:ring-destructive",success:"border-green-500 focus:ring-green-500"}},defaultVariants:{variant:"default",size:"default",state:"default"}}),L=classVarianceAuthority.cva("relative cursor-pointer select-none py-2 px-3 text-sm outline-none transition-colors",{variants:{variant:{default:"hover:bg-accent data-[highlighted]:bg-accent",subtle:"hover:bg-muted data-[highlighted]:bg-muted"},state:{default:"",selected:"bg-primary text-primary-foreground data-[highlighted]:bg-primary/90",disabled:"opacity-50 cursor-not-allowed"}},defaultVariants:{variant:"default",state:"default"}});var B=t.forwardRef(({className:n,children:r,...b},g)=>{let{isOpen:i,selectedValues:l,props:e,toggle:c,clearSelection:p,deselectOption:o}=V(),s=e.options||e.groups?.flatMap(u=>u.options)||[],d=()=>l.map(u=>s.find(N=>N.value===u)).filter(Boolean),S=()=>{if(l.length===0)return t__default.default.createElement("span",{className:"text-muted-foreground"},e.placeholder||"Select...");if(!e.multiple){let x=s.find(y=>y.value===l[0]);return t__default.default.createElement("span",{className:"truncate"},x?.label||String(l[0]))}let u=d(),N=e.selectedItemsDisplay||"badges",O=e.maxSelectedItemsToShow||3;return N==="count"||l.length>O?t__default.default.createElement("span",{className:"text-sm"},l.length," item",l.length===1?"":"s"," selected"):N==="text"?t__default.default.createElement("span",{className:"truncate"},u.map(x=>x?.label).join(", ")):t__default.default.createElement("div",{className:"flex flex-wrap gap-1 min-h-[1.25rem]"},u.slice(0,O).map(x=>t__default.default.createElement("div",{key:x?.value,className:"inline-flex items-center gap-1 px-2 py-0.5 bg-primary/10 text-primary text-xs rounded border border-primary/20"},t__default.default.createElement("span",{className:"truncate max-w-[100px]"},x?.label),e.showItemClearButtons!==false&&t__default.default.createElement("div",{onClick:y=>{y.stopPropagation(),x&&o(x);},className:"text-primary/70 hover:text-primary ml-1 p-0.5 rounded-full hover:bg-primary/20 cursor-pointer",role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),y.stopPropagation(),x&&o(x));}},t__default.default.createElement(lucideReact.X,{className:"h-3 w-3"})))),l.length>O&&t__default.default.createElement("span",{className:"text-xs text-muted-foreground px-2 py-0.5"},"+",l.length-O," more"))},w=u=>{u.stopPropagation(),p();};return t__default.default.createElement("button",{ref:g,className:v(M({variant:e.variant,size:e.size,state:e.error?"error":e.success?"success":"default"}),"flex items-center justify-between",e.multiple&&e.selectedItemsDisplay==="badges"&&l.length>0&&"min-h-[2.5rem] h-auto items-start py-2",e.disabled&&"cursor-not-allowed opacity-50",n),onClick:c,disabled:e.disabled,"aria-expanded":i,"aria-haspopup":"listbox",...b},t__default.default.createElement("div",{className:v("flex-1 min-w-0 text-left",l.length===0&&"text-muted-foreground")},S()),t__default.default.createElement("div",{className:"flex items-center gap-1"},e.clearable&&l.length>0&&t__default.default.createElement("div",{className:"text-muted-foreground hover:text-foreground p-0.5 rounded cursor-pointer",onClick:w,role:"button",tabIndex:0,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),w(u));},"aria-label":"Clear all selections"},t__default.default.createElement(lucideReact.X,{className:"h-3 w-3"})),e.loading?t__default.default.createElement(lucideReact.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t__default.default.createElement(lucideReact.ChevronDown,{className:v("h-4 w-4 text-muted-foreground transition-transform duration-200",i&&"transform rotate-180")})))});B.displayName="SelectTrigger";var $=t.forwardRef(({className:n,...r},b)=>{let{searchValue:g,setSearchValue:i,props:l}=V();return t__default.default.createElement("div",{className:"relative p-2 border-b border-border"},t__default.default.createElement(lucideReact.Search,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t__default.default.createElement("input",{ref:b,className:v("w-full bg-transparent pl-8 pr-2 py-1 text-sm outline-none placeholder:text-muted-foreground",n),placeholder:l.searchPlaceholder||"Search...",value:g,onChange:e=>i(e.target.value),...r}))});$.displayName="SelectSearch";var D=({option:n,index:r,showNumber:b,numberFormat:g})=>{let{highlightedIndex:i,selectedValues:l,selectOption:e,setHighlightedIndex:c,props:p}=V(),o=l.includes(n.value),s=i===r;return t__default.default.createElement("div",{className:v(L({variant:"default",state:n.disabled?"disabled":o?"selected":"default"}),s&&"bg-accent text-accent-foreground",p.optionClassName),onClick:()=>!n.disabled&&e(n),onMouseEnter:()=>c(r),"data-highlighted":s?"true":void 0,"data-selected":o?"true":void 0,"data-disabled":n.disabled?"true":void 0,role:"option","aria-selected":o},t__default.default.createElement("div",{className:"flex items-center gap-2 text-left"},b&&t__default.default.createElement("span",{className:"text-xs text-muted-foreground font-mono min-w-[1.5rem] text-center"},g?g(r):`${r+1}.`),n.icon&&t__default.default.createElement(n.icon,{className:"h-4 w-4 flex-shrink-0"}),t__default.default.createElement("div",{className:"flex-1 min-w-0 text-left"},t__default.default.createElement("div",{className:"flex items-center gap-2"},t__default.default.createElement("div",{className:"truncate text-left"},n.label),n.badge&&t__default.default.createElement("span",{className:v("px-1.5 py-0.5 text-xs rounded border font-medium whitespace-nowrap",{"bg-primary/10 text-primary border-primary/20":n.badgeVariant==="default"||!n.badgeVariant,"bg-muted text-muted-foreground border-border":n.badgeVariant==="secondary","bg-green-100 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800":n.badgeVariant==="success","bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800":n.badgeVariant==="warning","bg-red-100 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800":n.badgeVariant==="error","bg-transparent text-foreground border-border":n.badgeVariant==="outline"})},n.badge)),n.description&&t__default.default.createElement("div",{className:"text-xs text-muted-foreground truncate text-left"},n.description)),p.multiple&&o&&t__default.default.createElement(lucideReact.Check,{className:"h-4 w-4 flex-shrink-0"})))},te=()=>{let{selectedValues:n,filteredOptions:r,selectAll:b,clearSelection:g,props:i}=V(),e=(i.options||i.groups?.flatMap(d=>d.options)||[]).filter(d=>!d.disabled),c=e.length>0&&e.every(d=>n.includes(d.value)),p=n.length>0&&!c,o=()=>{c?g():b();},s=i.selectAllLabel||"Select All";return t__default.default.createElement(t__default.default.Fragment,null,t__default.default.createElement("div",{className:v("flex items-center justify-between px-3 py-2 text-sm cursor-pointer rounded-sm transition-colors","hover:bg-accent hover:text-accent-foreground border-b border-border mb-1","font-medium text-primary"),onClick:o,role:"option","aria-selected":c},t__default.default.createElement("div",{className:"flex items-center gap-2"},t__default.default.createElement("div",{className:v("w-4 h-4 border border-primary rounded flex items-center justify-center",c&&"bg-primary text-primary-foreground",p&&"bg-primary/20")},c&&t__default.default.createElement(lucideReact.Check,{className:"h-3 w-3"}),p&&t__default.default.createElement("div",{className:"w-2 h-2 bg-primary rounded-sm"})),t__default.default.createElement("span",null,s)),t__default.default.createElement("span",{className:"text-xs text-muted-foreground"},n.length,"/",e.length)))},j=t.forwardRef(({className:n,...r},b)=>{let{isOpen:g,filteredOptions:i,searchValue:l,props:e}=V();if(!g)return null;let c=i.length===0,p=e.searchable;return t__default.default.createElement("div",{ref:b,className:v("absolute z-50 w-full mt-1 bg-background border border-border rounded-md shadow-lg","animate-in fade-in-0 zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=top]:slide-in-from-bottom-2",e.dropdownClassName,n),style:{maxHeight:e.maxHeight||300},role:"listbox",...r},p&&t__default.default.createElement($,null),t__default.default.createElement("div",{className:"max-h-60 overflow-y-auto p-1"},c?t__default.default.createElement("div",{className:"px-3 py-6 text-center text-sm text-muted-foreground"},l?e.noSearchResultsMessage||"No results found":e.noOptionsMessage||"No options available"):t__default.default.createElement(t__default.default.Fragment,null,e.multiple&&e.selectAll&&!l&&t__default.default.createElement(te,null),e.groups?e.groups.map((o,s)=>{let d=o.options.filter(S=>i.some(w=>w.value===S.value));return d.length===0?null:t__default.default.createElement("div",{key:o.label},e.showGroupHeaders!==false&&t__default.default.createElement("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider border-b border-border"},o.label),d.map(S=>{let w=i.findIndex(u=>u.value===S.value);return t__default.default.createElement("div",{key:`${S.value}-${w}`,className:"pl-4"},t__default.default.createElement(D,{option:S,index:w,showNumber:e.numbered,numberFormat:e.numberFormat}))}),e.groupDividers&&s<(e.groups?.length||0)-1&&t__default.default.createElement("div",{className:"border-b border-border my-1"}))}):i.map((o,s)=>t__default.default.createElement(D,{key:`${o.value}-${s}`,option:o,index:s,showNumber:e.numbered,numberFormat:e.numberFormat})))))});j.displayName="SelectContent";var F=t.forwardRef(({className:n,...r},b)=>{let{triggerRef:g,dropdownRef:i,isOpen:l,close:e,highlightNext:c,highlightPrevious:p,selectHighlighted:o}=V();return t.useEffect(()=>{let s=d=>{if(l)switch(d.key){case "ArrowDown":d.preventDefault(),c();break;case "ArrowUp":d.preventDefault(),p();break;case "Enter":d.preventDefault(),o();break;case "Escape":d.preventDefault(),e();break}};if(l)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[l,c,p,o,e]),t.useEffect(()=>{let s=d=>{l&&g.current&&i.current&&!g.current.contains(d.target)&&!i.current.contains(d.target)&&e();};if(l)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[l,e,g,i]),t__default.default.createElement("div",{ref:b,className:v("relative w-full",n)},t__default.default.createElement(B,{ref:g}),t__default.default.createElement(j,{ref:i}))});F.displayName="Select";var K=t.forwardRef((n,r)=>t__default.default.createElement(I,{props:n},t__default.default.createElement(F,{ref:r,...n})));K.displayName="theReactSelect";exports.Select=K;exports.cn=v;exports.optionVariants=L;exports.selectVariants=M;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map